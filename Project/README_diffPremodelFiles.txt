There are 3 Premodel files in the folder.

Premodel.py is the exact code pulled from the source link.

Premodel_raw is my initial translation into R.

Premodel_piped is a fancier version of Premodel_raw that uses
more advanced techniques like pipes and adjusted pipes.